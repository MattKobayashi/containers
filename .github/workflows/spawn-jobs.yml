---
name: Spawn Jobs

on:
  workflow_call:
    inputs:
      repo-owner:
        required: true
        type: string

jobs:
  actions-runner:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'actions-runner' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: actions-runner
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  avahi:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'avahi' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: avahi
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  certbot-cloudflare:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'certbot-cloudflare' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: certbot-cloudflare
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  fullbogons:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'fullbogons' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: fullbogons
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  growatt-ev:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'growatt-ev' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: growatt-ev
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  iperf2:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'iperf2' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: iperf2
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  iperf3:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'iperf3' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: iperf3
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  mdns-reflector:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'mdns-reflector' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: mdns-reflector
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  otbr:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'otbr' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: otbr
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}/ot-br-posix-conditional_avahi/etc/docker/
  rng-tools:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'rng-tools' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: rng-tools
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  speedtest:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'speedtest' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: speedtest
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  stun:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'stun' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: stun
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  telegraf:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'telegraf' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: telegraf
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  verlihub:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'verlihub' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: verlihub
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  vyos-release-alert:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'vyos-release-alert' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: vyos-release-alert
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  xteve:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'xteve' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: xteve
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
  yancobat:
    if: ${{ github.ref_name == 'main' || github.head_ref == 'yancobat' }}
    uses: ./.github/workflows/build-and-push.yml
    with:
      image-name: yancobat
      repo-owner: ${{ inputs.repo-owner }}
      build-context: ./${{ inputs.image-name }}
